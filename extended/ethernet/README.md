# Ethernet

Функціональні блоки для зв’язку Ethernet використовуються для обміну даними між пристроями Ethernet за допомогою User Datagram Protocol (UDP), Transmission Control Protocol (TCP) і протоколу Transport Layer Security (TLS).

## TCP

TCP (Transmission Control Protocol) — це протокол, орієнтований на підключення, який дозволяє надсилати та/або отримувати потоки даних між двома кінцевими точками через мережеве з’єднання. Орієнтований на з’єднання означає, що перед обміном даними спочатку має бути встановлено з’єднання між комунікаційними партнерами. Під час обміну даними з'єднання залишається відкритим. Після завершення обміну даними з'єднання потрібно закрити. TCP включає перевірку помилок і гарантує повну доставку даних, включаючи порядок, у якому було надіслано пакети.

Для зв’язку через TCP доступні наступні функціональні блоки :

| Функція                       | Короткий опис                                    |
| ----------------------------- | ------------------------------------------------ |
| [TCP_SOCKET](TCP_SOCKET.md)   | Відкриває сокет TCP для зв’язку через TCP)       |
| [TCP_SEND](TCP_SEND.md)       | Передає дані на підключений пристрій через TCP   |
| [TCP_RECEIVE](TCP_RECEIVE.md) | Отримує дані від підключеного пристрою через TCP |

## UDP

UDP (User Datagram Protocol) — це мережевий протокол без підключення, який обмінюється так званими дейтаграмами між пристроями Ethernet, що підтримують UDP, без підтвердження. Без з’єднання означає, що немає необхідності спочатку встановлювати з’єднання перед надсиланням або отриманням дейтаграм. Відправник, наприклад, просто надсилає дейтаграму і не перевіряє, чи її отримав одержувач. Дейтаграма UDP складається з заголовка UDP, за яким слідують дані. Адресна інформація, тобто інформація про відправника та одержувача дейтаграми, міститься в заголовку UDP. 

Починаючи з версії мікропрограми 2021.3, доступні нові функціональні блоки UDP, які підтримують широкомовлення.

Для зв’язку через UDP доступні такі функціональні блоки:

| Функція                           | Короткий опис                                                |
| --------------------------------- | ------------------------------------------------------------ |
| [UDP_SOCKET_2](UDP_SOCKET_2.md)   | Нова реалізація UDP_SOCKET FB. Підтримує ширкомовну передачу. |
| [UDP_SEND_2](UDP_SEND_2.md)       | Нова реалізація UDP_SEND FB. Підтримує ширкомовну передачу, якщо сокет було створено відповідним чином. |
| [UDP_RECEIVE_2](UDP_RECEIVE_2.md) | Нова реалізація UDP_RECEIVE FB.                              |



## TLS

Починаючи з **версії мікропрограми 2021.3**, доступні нові функціональні блоки, які поєднують обробку TCP і TLS і підтримують зв’язок одного сервера TCP/TLS з кількома клієнтами.

TLS (Transport Layer Security) — це криптографічний протокол, який забезпечує безпечний зв’язок між партнерами по зв’язку в мережі. Протокол TLS працює поверх протоколу TCP (Transmission Control Protocol). Щоб увімкнути зв’язок і обмінюватися даними з функціональними блоками `TLS_SEND_2` і `TLS_RECEIVE_2`, спочатку необхідно встановити з’єднання між комунікаційними партнерами за допомогою функціонального блоку `TLS_SOCKET_2`. Потім протокол TLS має бути ініціалізований FB `TLS_SOCKET_2`. (Інакше можливий зв'язок TCP.)

Під час обміну даними з'єднання залишається відкритим. Після завершення обміну даними з'єднання потрібно закрити.

**Примітка** Функціональні блоки `TLS_*_2` є новішими реалізаціями FB `TLS_*` у поєднанні з FB `TCP_*` Різниця між новою та старішою реалізаціями полягає в тому, що FB  `TLS_*_2` поєднує обробку зв’язку TCP і TLS і підтримує обидва протоколи. Крім того, вони підтримують сервер TCP/TLS, який може спілкуватися з кількома клієнтами TCP/TLS.

Для зв’язку доступні такі функціональні блоки:

| Функція                           | Короткий опис                                                |
| --------------------------------- | ------------------------------------------------------------ |
| [TLS_SOCKET_2](TLS_SOCKET_2.md)   | Opens and closes a TCP/TLS socket and initializes TCP or TLS communication (depending on the input values) |
| [TLS_SEND_2](TLS_SEND_2.md)       | Transmits data to a connected device via TCP/TLS             |
| [TLS_RECEIVE_2](TLS_RECEIVE_2.md) | Receives data from a connected device via TCP/TLS            |

Увага. Переконайтеся, що вплив вихідних даних не може призвести до ненавмисної або небезпечної поведінки всієї системи. Під час запуску логіки програми в режимі симуляції функціональні блоки для зв’язку Ethernet встановлюють **реальне** з’єднання з іншими пристроями/серверами. Таким чином, вихідні дані та змінні, підключені до реального апаратного забезпечення, можуть бути встановлені і, таким чином, можуть завдати реальної шкоди машині.