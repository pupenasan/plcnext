https://www.plcnext.help/te/Service_Components/DataLogger/DataLogger_concept.htm

# Real-time DataLogger 

Як тільки ви реєструєте значення споживання, потрібно підтвердити подачу енергії або, можливо, потрібно реєструвати стан заводу, вам потрібен надійний збір даних. З PLCnext Real-time DataLogger тепер у вас є зручний спосіб виконувати всі ці випадки використання без будь-яких програмних зусиль. Просто параметризуйте необхідні змінні, і DataLogger почне записувати значення, синхронні із завданням ESM. Дані доступні безпосередньо на SD-карті контролера, або ви можете покластися на [OPC UA Historical Access](https://www.plcnext.help/te/Service_Components/OPC_UA/OPCUA_historical_access.htm).

Крім того, ви можете вирішити, чи записуватиметься кожне значення чи лише змінені значення. Ось так простий реєстратор даних стає потужною системою запису подій («Послідовність подій»).

Примітка. Під час планування проекту, який залежить від синхронного із завданням реєстрації даних у режимі реального часу, настійно рекомендується вибирати апаратне забезпечення відповідно до максимального навантаження ЦП від 70 до 80 відсотків, видимого в панелі керування PLCnext Engineer. Перегляньте [ESM](https://www.plcnext.help/te/PLCnext_Runtime/ESM.htm), щоб отримати додаткову інформацію про вплив на контекст реального часу.

DataLogger є сервісним компонентом середовища виконання PLCnext Technology. Цей компонент передає дані в реальному часі з [GDS](https://www.plcnext.help/te/PLCnext_Runtime/GDS_Global_Data_Space.htm) до бази даних для запису та зберігання.

Цей спрощений схематичний малюнок показує, як працює DataLogger:

![img](https://www.plcnext.help/assets/images/Firmware/DataLogger_simplest.svg)

Під час запуску та зупинки середовища виконання PLCnext Technology налаштований сеанс DataLogger запускається та зупиняється автоматично. Потім DataLogger збирає значення, які є синхронними із завданням ESM налаштованих портів GDS із заданою частотою дискретизації, і зберігає їх із міткою часу (з точністю до 1 мкс) на диску RAM.

За стандартних налаштувань база даних зберігається на SD-карті, сумісній із SQLite, у PLCnext Control. Потім ви можете будь-коли скопіювати базу даних, прочитати її на місці через OPC UA Historical Access або прочитати записи через інтерфейс C++ ([RSC IDataLoggerService2](https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_IDataLoggerService2.htm)). Усі основні налаштування надаються у файлі конфігурації XML, подальше програмування не потрібне.

DataLogger внутрішньо використовує [підписки GDS](https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_GDS_services.htm#Subscription_types_(Subscriptionkind)) `<SubscriptionKind> Recording`, яка поводиться як `RealTime` і ` HighPerformance`. Це призводить до значень для змінних екземпляра, які є синхронними із завданням ESM. Іншими словами: в межах одного запису значення всіх змінних екземпляра, пов’язаний екземпляр програми з яким пов’язано з тим самим завданням ESM, походять від того самого циклу виконання цього завдання. До мікропрограми 2021.0 LTS це єдиний спосіб отримати значення, синхронні із завданням: глобальні змінні ресурсу та порти компонентів не мають такого завдання ESM і тому не можуть бути синхронними із завданням ESM.

Починаючи з мікропрограми 2021.6, DataLogger підтримує безперервний запис із вибраним завданням ESM, використовуючи атрибут `taskContext ` замість ` samplingInterval`. Якщо вказати завдання ESM просто через його назву, значення всіх типів змінних будуть відібрані в цьому завданні:

- глобальні змінні ресурсів і порти компонентів
- змінні, створені в програмі, пов'язані з будь-яким завданням ESM